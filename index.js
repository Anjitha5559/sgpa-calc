var data = {
    branches: [
        {
            name: "CSE",
            semesters: [
                {
                    name: "Semester 1",
                    subjects: [
                        {
                            name: "Maths",
                            credits: 4
                        },
                        {
                            name: "Physics/Chemistry",
                            credits: 4
                        },
                        {
                            name: "Graphics/Mechanics",
                            credits: 3
                        },
                        {
                            name: "BCME/BEEE",
                            credits: 4
                        },
                        {
                            name: "Phy/Che Lab",
                            credits: 1
                        },
                        {
                            name: "C&M Workshop/ E&E Workshop",
                            credits: 1
                        }

                    ]
                },
                {
                    name: "Semester 2",
                    subjects: [
                        {
                            name: "Maths",
                            credits: 4
                        },
                        {
                            name: "Physics/Chemistry",
                            credits: 4
                        },
                        {
                            name: "Graphics/Mechanics",
                            credits: 3
                        },
                        {
                            name: "BCME/BEEE",
                            credits: 4
                        },
                        {
                            name: "Programming in C",
                            credits: 3
                        },
                        {
                            name: "Phy/Che Lab",
                            credits: 1
                        },
                        {
                            name: "C&M Workshop/ E&E Workshop",
                            credits: 1
                        }

                    ]
                },
                {
                    name: "Semester 3",
                    subjects: [
                        {
                            name: "DISCRETE MATHEMATICAL STRUCTURES",
                            credits: 4
                        },
                        {
                            name: "DATA STRUCTURES",
                            credits: 4
                        },
                        {
                            name: "OBJECT ORIENTED PROGRAMMING USING JAVA",
                            credits: 4
                        },
                        {
                            name: "LOGIC SYSTEMS DESIGN",
                            credits: 4
                        },
                        {
                            name: "DESIGN AND ENGINEERING",
                            credits: 2
                        },
                        {
                            name: "DATA STRUCTURES LAB",
                            credits: 2
                        },
                        {
                            name: "OBJECT ORIENTED PROGRAMMING USING JAVA LAB",
                            credits: 2
                        }
                    ]
                },
                {
                    name: "Semester 4",
                    subjects: [
                        {
                            name: "GRAPH THEORY",
                            credits: 4
                        },
                        {
                            name: "Computer Organization and Architecture",
                            credits: 4
                        },
                        {
                            name: "Database Management Systems",
                            credits: 4
                        },
                        {
                            name: "OPERATING SYSTEMS",
                            credits: 4
                        },
                        {
                            name: "PROFESSIONAL ETHICS",
                            credits: 2
                        },
                        {
                            name: "DIGITAL LAB",
                            credits: 2
                        },
                        {
                            name: "OPERATING SYSTEMS LAB",
                            credits: 2
                        }
                    ]
                },
                {
                    name: "Semester 5",
                    subjects: [
                        {
                            name: "FORMAL LANGUAGES AND AUTOMATA THEORY",
                            credits: 4
                        },
                        {
                            name: "COMPUTER NETWORKS",
                            credits: 4
                        },
                        {
                            name: "SYSTEM SOFTWARE",
                            credits: 4
                        },
                        {
                            name: "MICROPROCESSORS AND MICROCONTROLLERS",
                            credits: 4
                        },
                        {
                            name: "MANAGEMEENT OF SOFTWARE SYSTEMS",
                            credits: 3
                        },
                        {
                            name: "SYSTEM SOFTWARE AND MICROPROCESSORS LAB",
                            credits: 2
                        },
                        {
                            name: "DATABASE MANAGEMENT SYSTEMS LAB",
                            credits: 2
                        }
                    ]
                },
                {
                    name: "Semester 6",
                    subjects: [
                        {
                            name: "COMPILER DESIGN",
                            credits: 4
                        },
                        {
                            name: "COMPUTER GRAPHICS AND IMAGE PROCESSING",
                            credits: 4
                        },
                        {
                            name: "ALGORITHM ANALYSIS AND DESIGN",
                            credits: 4
                        },
                        {
                            name: "ELECTIVE 1",
                            credits: 3
                        },
                        {
                            name: "INDUSTRIAL ECONOMICS AND FOREIGN TRADE",
                            credits: 3
                        },
                        {
                            name: "COMPREHENSIVE COURSE WORK",
                            credits: 1
                        },
                        {
                            name: "NETWORKING LAB",
                            credits: 2
                        },
                        {
                            name: "MINI PROJECT",
                            credits: 2
                        }
                    ]
                },
                {
                    name: "Semester 7",
                    subjects: [
                        {
                            name: "ARTIFICIAL INTELLIGENCE",
                            credits: 4
                        },
                        {
                            name: "ELECTIVE II",
                            credits: 3
                        },
                        {
                            name: "OPEN ELECTIVE",
                            credits: 3
                        },
                        {
                            name: "INDUSTRY SAFETY ENGINEERING",
                            credits: 2
                        },
                        {
                            name: "COMPLILER LAB",
                            credits: 2
                        },
                        {
                            name: "SEMINAR",
                            credits: 2
                        },
                        {
                            name: "PROJECT PHASE 1",
                            credits: 2
                        }
                    ]


                },
                {
                    name: "Semester 8",
                    subjects: [
                        {
                            name: "DISTRIBUTED COMPUTING",
                            credits: 4
                        },
                        {
                            name: "ELECTIVE III",
                            credits: 3
                        },
                        {
                            name: "ELECTIVE IV",
                            credits: 3
                        },
                        {
                            name: "ELECTIVE V",
                            credits: 3
                        },
                        {
                            name: "COMPREHENSIVE COURSE VIVA",
                            credits: 1
                        },
                        {
                            name: "PROJECT PHASE 2",
                            credits: 2
                        }
                    ]


                }




            ]
        },
        {
            name: "ECE",
            semesters: [
                {
                    name: "Semester 1",
                    subjects: [
                        {
                            name: "Maths",
                            credits: 4
                        },
                        {
                            name: "Physics/Chemistry",
                            credits: 4
                        },
                        {
                            name: "Graphics/Mechanics",
                            credits: 3
                        },
                        {
                            name: "BCME/BEEE",
                            credits: 4
                        },
                        {
                            name: "Phy/Che Lab",
                            credits: 1
                        },
                        {
                            name: "C&M Workshop/ E&E Workshop",
                            credits: 1
                        }

                    ]
                },
                {
                    name: "Semester 2",
                    subjects: [
                        {
                            name: "Maths",
                            credits: 4
                        },
                        {
                            name: "Physics/Chemistry",
                            credits: 4
                        },
                        {
                            name: "Graphics/Mechanics",
                            credits: 3
                        },
                        {
                            name: "BCME/BEEE",
                            credits: 4
                        },
                        {
                            name: "Programming in C",
                            credits: 3
                        },
                        {
                            name: "Phy/Che Lab",
                            credits: 1
                        },
                        {
                            name: "C&M Workshop/ E&E Workshop",
                            credits: 1
                        }

                    ]
                },
                {
                    name: "Semester 3",
                    subjects: [
                        {
                            name: "DISCRETE MATHEMATICAL STRUCTURES",
                            credits: 4
                        },
                        {
                            name: "DATA STRUCTURES",
                            credits: 4
                        },
                        {
                            name: "OBJECT ORIENTED PROGRAMMING USING JAVA",
                            credits: 4
                        },
                        {
                            name: "LOGIC SYSTEMS DESIGN",
                            credits: 4
                        },
                        {
                            name: "DESIGN AND ENGINEERING",
                            credits: 2
                        },
                        {
                            name: "DATA STRUCTURES LAB",
                            credits: 2
                        },
                        {
                            name: "OBJECT ORIENTED PROGRAMMING USING JAVA LAB",
                            credits: 2
                        }
                    ]
                },
                {
                    name: "Semester 4",
                    subjects: [
                        {
                            name: "GRAPH THEORY",
                            credits: 4
                        },
                        {
                            name: "Computer Organization and Architecture",
                            credits: 4
                        },
                        {
                            name: "Database Management Systems",
                            credits: 4
                        },
                        {
                            name: "OPERATING SYSTEMS",
                            credits: 4
                        },
                        {
                            name: "PROFESSIONAL ETHICS",
                            credits: 2
                        },
                        {
                            name: "DIGITAL LAB",
                            credits: 2
                        },
                        {
                            name: "OPERATING SYSTEMS LAB",
                            credits: 2
                        }
                    ]
                },
                {
                    name: "Semester 5",
                    subjects: [
                        {
                            name: "FORMAL LANGUAGES AND AUTOMATA THEORY",
                            credits: 4
                        },
                        {
                            name: "COMPUTER NETWORKS",
                            credits: 4
                        },
                        {
                            name: "SYSTEM SOFTWARE",
                            credits: 4
                        },
                        {
                            name: "E MICROPROCESSORS AND MICROCONTROLLERS",
                            credits: 4
                        },
                        {
                            name: "MANAGEMEENT OF SOFTWARE SYSTEMS",
                            credits: 3
                        },
                        {
                            name: "SYSTEM SOFTWARE AND MICROPROCESSORS LAB",
                            credits: 2
                        },
                        {
                            name: "DATABASE MANAGEMENT SYSTEMS LAB",
                            credits: 2
                        }
                    ]
                },
                {
                    name: "Semester 6",
                    subjects: [
                        {
                            name: "E COMPILER DESIGN",
                            credits: 4
                        },
                        {
                            name: " E COMPUTER GRAPHICS AND IMAGE PROCESSING",
                            credits: 4
                        },
                        {
                            name: "E ALGORITHM ANALYSIS AND DESIGN",
                            credits: 4
                        },
                        {
                            name: "E ELECTIVE 1",
                            credits: 3
                        },
                        {
                            name: "INDUSTRIAL ECONOMICS AND FOREIGN TRADE",
                            credits: 3
                        },
                        {
                            name: "COMPREHENSIVE COURSE WORK",
                            credits: 1
                        },
                        {
                            name: "NETWORKING LAB",
                            credits: 2
                        },
                        {
                            name: "MINI PROJECT",
                            credits: 2
                        }
                    ]
                },
                {
                    name: "Semester 7",
                    subjects: [
                        {
                            name: "WIRELESS COMMUNICATION",
                            credits: 4
                        },
                        {
                            name: "ELECTIVE II",
                            credits: 3
                        },
                        {
                            name: "OPEN ELECTIVE",
                            credits: 3
                        },
                        {
                            name: "INDUSTRY SAFETY ENGINEERING",
                            credits: 2
                        },
                        {
                            name: "ELECTROMAGNETICS LAB",
                            credits: 2
                        },
                        {
                            name: "SEMINAR",
                            credits: 2
                        },
                        {
                            name: "PROJECT PHASE 1",
                            credits: 2
                        }
                    ]


                },
                {
                    name: "Semester 8",
                    subjects: [
                        {
                            name: "INSTRUMENTATION",
                            credits: 4
                        },
                        {
                            name: "ELECTIVE III",
                            credits: 3
                        },
                        {
                            name: "ELECTIVE IV",
                            credits: 3
                        },
                        {
                            name: "ELECTIVE V",
                            credits: 3
                        },
                        {
                            name: "COMPREHENSIVE VIVA VOICE",
                            credits: 1
                        },
                        {
                            name: "PROJECT PHASE 2",
                            credits: 2
                        }
                    ]


                }



            ]
}]}
var branches = JSON.parse(JSON.stringify(data)).branches;
function getSemester(branch){
    for(var i=0;i<branches.length;i++){
        if(branches[i].name==branch){
            var semesters = branches[i].semesters;
            break;
        }
    }
      return semesters;   
}
function getSubjects(branch,semester){
    var semesters = getSemester(branch);
    var subjects = semesters[semester-1].subjects;
  
    return subjects;
}


//chooseGPA();
chooseSubject("ECE",6,getSubjects("ECE",6))

function chooseGPA() {
    const GPA = document.getElementById("GPA");

    GPA.addEventListener("change", function () {
        if (GPA.value == "SGPA") {
            chooseBranch();
            console.log("IT IS SGPA");

        }
        else if (GPA.value == "CGPA") {
            console.log("IT IS CGPA");
        }
        else {
            alert("PLEASE SELECT EITHER SGPA OR CGPA");
            console.log("PLEASE SELECT EITHER SGPA OR CGPA")
        }
    });
}

function chooseBranch() {
    var branchSelect = document.getElementById("branchSelector");
    var options = '<option id="options">Branch</option>';
    for (var i = 0; i < branches.length; i++) {
        options += "<option value=" + branches[i].name + ">" + branches[i].name + "</option>";
    }
    branchSelect.innerHTML = '<select id="BRANCH" class="dropDown">' + options + '</select>';
    var BRANCH = document.getElementById("BRANCH");
    BRANCH.addEventListener("change", function () {
        var branch = BRANCH.value;
        console.log(branch);
      var semesters =  getSemester(branch);
        chooseSemester(branch,semesters);

    });
}

function chooseSemester(branch,semesters) {
    console.log(semesters);
    var semesterSelect = document.getElementById("semesterSelector");
    var options = '<option id="options">Semester</option>';
    for (var i = 0; i < semesters.length; i++) {
        var newName = semesters[i].name.replace("Semester", "");
        options += "<option value=" + newName + ">" + semesters[i].name + "</option>";
    }
    semesterSelect.innerHTML = '<select id="SEMESTER" class="dropDown">' + options + '</select>';
    var SEMESTER = document.getElementById("SEMESTER");
    SEMESTER.addEventListener("change", function () {
        var semester = SEMESTER.value;
        console.log(semester);
        var subjects = getSubjects(branch,semester);

        chooseSubject(branch,semester,subjects);
    });
}

function chooseSubject(branch,semester,subjects) {
    var gradeSelect = document.getElementById("gradeSelector");
    var subData = "";

    for (var i = 0; i < subjects.length; i++) {
        subData += 
        `<div class="subdata row row1 dropDown dropDown1">
        <div class="subjects" credit=`+subjects[i].credits+`>
        `+subjects[i].name+`
        </div>

            <select name="grade" class="dropDown">
                <option id="opt1" value="9">S</option>
                <option id="opt1" value="8.5">A+</option>
                <option id="opt1" value="8">A</option>
                <option id="opt1" value="7.5">B+</option>
                <option id="opt1" value="7">B</option>
                <option id="opt1" value="6.5">C</option>
                <option id="opt1" value="6">D</option>
                <option id="opt1" value="4">F</option>
            </select>
    </div>`;
}
gradeSelect.innerHTML = subData;
gradeSelect.innerHTML+='<div id="btn">CALCULATE</div>'
const btn = document.getElementById("btn");
btn.addEventListener('click',function(){
    calculateSGPA(subjects);
})

}
function calculateSGPA(subjects){
    const result = document.getElementById("showResult");
    var subjects = document.getElementsByClassName("subdata");
    console.log(subjects);
    var total = 0;
    var max=0;
    for(var i=0;i<subjects.length;i++){
    var credit = subjects[i].children[0].getAttribute("credit");
    var grade = subjects[i].children[1].value;
    total += credit*grade;
    max+=credit*10;
    }
   
 
   result.innerHTML = (total/max).toFixed(2)*10;

}



